function admin_login(){var e=document.getElementById("adminname").value,t=document.getElementById("adminpasswd").value;if(""===e.trim()||""===t.trim())alert("请输入有效的账号和密码");else{let n=document.getElementById("login_button");n.textContent="登录中...",n.disabled=!0,fetch("/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminname:e,adminpasswd:t})}).then(t=>{t.json().then(e=>{200===t.status?(console.log("Success:",e),n.textContent="登录",n.disabled=!1,window.location.href="/admin_set"):(console.error("Error:",t),n.textContent="登录",n.disabled=!1,alert(e.msg))})}).catch(e=>{console.error("网络错误或其他错误:",e),n.textContent="登录",n.disabled=!1,alert("登录失败，可能网络错误。",e)})}}function init_admin(){fetch("/admin/init",{method:"POST",credentials:"include"}).then(t=>{t.json().then(e=>{200===t.status?console.log("Success:",e):201===t.status?console.log("Forbidden:",t):console.error("Error:",t)})}).catch(e=>{console.error("Fetch Error:",e)})}document.addEventListener("DOMContentLoaded",init_admin);